
<!-- SIDEBAR SECTION END -->

<!-- HEADER SECTION START -->
<header class="ul-header">
    <!-- header top -->
    <div class="ul-header-top">
        <div class="ul-header-top-slider splide">
            <div class="splide__track">
                <ul class="splide__list">
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i>limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                    <li class="splide__slide">
                        <p class="ul-header-top-slider-item"><i class="flaticon-sparkle"></i> limited time offer</p>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- header bottom -->
    <div class="ul-header-bottom">
        <div class="ul-container">
            <div class="ul-header-bottom-wrapper">
                <!-- header left -->
                <div class="header-bottom-left">
                    <div class="logo-container">
                        <a href="/" class="d-inline-block"><img src="/static/img/logo.png" alt="logo" class="logo"></a>
                    </div>

                    <!-- search form -->
                    <div class="ul-header-search-wrapper" id="searchContainer">
                        <div class="search-input-group">
                            <div class="dropdown-wrapper">
                                <select name="search-category" id="headerSearchCategory" class="ul-select">
                                    <option value="1">All</option>
                                    <option value="2">Men's</option>
                                    <option value="3">Women's</option>
                                    <option value="4">Kids</option>
                                </select>
                            </div>
                            <div class="search-input-wrapper">
                                <input type="search" id="headerSearchInput" placeholder="Search products..." class="ul-search-input">
                                <button type="button" id="searchButton" class="search-btn">
                                    <i class="flaticon-search-interface-symbol"></i>
                                </button>
                                <!-- Search Results Dropdown -->
                                <div id="searchResults" class="search-results-dropdown"></div>
                            </div>
                        </div>
                    </div>

                    <script>
                        let searchTimeout;
                        let currentSearchQuery = '';
                        
                        const searchInput = document.getElementById('headerSearchInput');
                        const searchCategory = document.getElementById('headerSearchCategory');
                        const searchResults = document.getElementById('searchResults');
                        const searchButton = document.getElementById('searchButton');

                        // Handle input events for live search
                        searchInput.addEventListener('input', function() {
                            const query = this.value.trim();
                            
                            if (query.length < 2) {
                                hideSearchResults();
                                return;
                            }

                            clearTimeout(searchTimeout);
                            searchTimeout = setTimeout(() => {
                                performSearch(query);
                            }, 300);
                        });

                        // Handle category change
                        searchCategory.addEventListener('change', function() {
                            const query = searchInput.value.trim();
                            if (query.length >= 2) {
                                performSearch(query);
                            }
                        });

                        // Handle search button click
                        searchButton.addEventListener('click', function() {
                            const query = searchInput.value.trim();
                            if (query.length >= 2) {
                                performSearch(query);
                            }
                        });

                        // Handle Enter key
                        searchInput.addEventListener('keydown', function(e) {
                            if (e.key === 'Enter') {
                                e.preventDefault();
                                const query = this.value.trim();
                                if (query.length >= 2) {
                                    // If there are search results, navigate to the first one
                                    const firstResult = searchResults.querySelector('.search-result-item');
                                    if (firstResult) {
                                        firstResult.click();
                                    } else {
                                        performSearch(query);
                                    }
                                }
                            } else if (e.key === 'Escape') {
                                hideSearchResults();
                            }
                        });

                        // Perform search via AJAX
                        function performSearch(query) {
                            if (query === currentSearchQuery) return;
                            
                            currentSearchQuery = query;
                            const category = searchCategory.value;
                            
                            // Show loading state
                            searchResults.innerHTML = '<div class="no-results">Searching...</div>';
                            showSearchResults();
                            
                            fetch(`/search/api?q=${encodeURIComponent(query)}&category=${category}`)
                                .then(response => {
                                    if (!response.ok) {
                                        throw new Error('Search request failed');
                                    }
                                    return response.json();
                                })
                                .then(data => {
                                    displaySearchResults(data);
                                })
                                .catch(error => {
                                    console.error('Search error:', error);
                                    searchResults.innerHTML = '<div class="no-results">Search temporarily unavailable</div>';
                                    showSearchResults();
                                });
                        }

                        // Display search results
                        function displaySearchResults(results) {
                            if (results.length === 0) {
                                searchResults.innerHTML = '<div class="no-results">No products found</div>';
                            } else {
                                searchResults.innerHTML = results.map(product => `
                                    <div class="search-result-item" onclick="navigateToProduct('${product.url}')">
                                        <img src="${product.image}" alt="${product.name}" class="result-image" onerror="this.src='/static/images/placeholder.png'">
                                        <div class="result-content">
                                            <h4 class="result-title">${escapeHtml(product.name)}</h4>
                                            <p class="result-desc">${escapeHtml(product.desc)}</p>
                                            <span class="result-price">${escapeHtml(product.price)}</span>
                                        </div>
                                    </div>
                                `).join('');
                            }
                            showSearchResults();
                        }

                        // Helper function to escape HTML
                        function escapeHtml(text) {
                            const div = document.createElement('div');
                            div.textContent = text;
                            return div.innerHTML;
                        }

                        // Navigate to product page
                        function navigateToProduct(url) {
                            window.location.href = url;
                        }

                        // Show search results dropdown
                        function showSearchResults() {
                            searchResults.style.display = 'block';
                        }

                        // Hide search results dropdown
                        function hideSearchResults() {
                            searchResults.style.display = 'none';
                            currentSearchQuery = '';
                        }

                        // Hide results when clicking outside
                        document.addEventListener('click', function(e) {
                            if (!document.getElementById('searchContainer').contains(e.target)) {
                                hideSearchResults();
                            }
                        });

                        // Handle focus events
                        searchInput.addEventListener('focus', function() {
                            if (this.value.trim().length >= 2) {
                                showSearchResults();
                            }
                        });
                    </script>

                    <style>
                        /* Search Container */
                        .ul-header-search-wrapper {
                            position: relative;
                            z-index: 1000;
                            flex: 1;
                            max-width: 600px;
                            min-width: 300px;
                        }

                        .search-input-group {
                            display: flex;
                            gap: 10px;
                            align-items: center;
                            background: var(--ul-white);
                            border: 2px solid var(--ul-border-color);
                            border-radius: 8px;
                            padding: 4px;
                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                            transition: all 0.3s ease;
                            width: 100%;
                        }

                        .search-input-group:focus-within {
                            border-color: var(--ul-primary);
                            box-shadow: 0 4px 12px rgba(var(--ul-primary-rgb), 0.2);
                        }

                        /* Category Dropdown */
                        .dropdown-wrapper {
                            position: relative;
                            min-width: 90px;
                            flex-shrink: 0;
                        }

                        .dropdown-wrapper select {
                            width: 100%;
                            height: 44px;
                            padding: 0 12px;
                            border: none;
                            background: transparent;
                            font-size: 0.9rem;
                            color: var(--ul-primary);
                            appearance: none;
                            -webkit-appearance: none;
                            cursor: pointer;
                            outline: none;
                        }

                        .dropdown-wrapper::after {
                            content: '';
                            position: absolute;
                            right: 8px;
                            top: 50%;
                            transform: translateY(-50%);
                            width: 0;
                            height: 0;
                            border-left: 4px solid transparent;
                            border-right: 4px solid transparent;
                            border-top: 4px solid var(--ul-primary);
                            pointer-events: none;
                        }

                        /* Search Input Wrapper */
                        .search-input-wrapper {
                            position: relative;
                            flex: 1;
                            display: flex;
                            align-items: center;
                            min-width: 0;
                        }

                        .ul-search-input {
                            width: 100%;
                            height: 44px;
                            padding: 0 50px 0 16px;
                            border: none;
                            background: transparent;
                            font-size: 1rem;
                            outline: none;
                            color: var(--ul-text-color);
                        }

                        .ul-search-input::placeholder {
                            color: var(--ul-text-light);
                        }

                        .search-btn {
                            position: absolute;
                            right: 8px;
                            top: 50%;
                            transform: translateY(-50%);
                            background: var(--ul-primary);
                            color: white;
                            border: none;
                            width: 36px;
                            height: 36px;
                            border-radius: 6px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.3s ease;
                            flex-shrink: 0;
                        }

                        .search-btn:hover {
                            background: var(--ul-primary-dark);
                            transform: translateY(-50%) scale(1.05);
                        }

                        /* Search Results Dropdown */
                        .search-results-dropdown {
                            position: absolute;
                            top: calc(100% + 2px);
                            left: 0;
                            right: 0;
                            background: rgba(255, 255, 255, 0.98);
                            backdrop-filter: blur(10px);
                            -webkit-backdrop-filter: blur(10px);
                            border: 1px solid rgba(0, 0, 0, 0.1);
                            border-radius: 12px;
                            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
                            max-height: 350px;
                            overflow-y: auto;
                            z-index: 9999;
                            display: none;
                            margin-top: 0;
                        }

                        .search-result-item {
                            display: flex;
                            align-items: center;
                            padding: 12px 16px;
                            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
                            cursor: pointer;
                            transition: all 0.2s ease;
                            min-height: 70px;
                            background: transparent;
                        }

                        .search-result-item:hover {
                            background: rgba(var(--ul-primary-rgb), 0.05);
                            transform: translateY(-1px);
                        }

                        .search-result-item:last-child {
                            border-bottom: none;
                            border-radius: 0 0 12px 12px;
                        }

                        .result-image {
                            width: 50px;
                            height: 50px;
                            object-fit: cover;
                            border-radius: 8px;
                            margin-right: 12px;
                            flex-shrink: 0;
                            border: 1px solid rgba(0, 0, 0, 0.08);
                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                        }

                        .result-content {
                            flex: 1;
                            min-width: 0;
                        }

                        .result-title {
                            font-size: 0.95rem;
                            font-weight: 600;
                            color: var(--ul-heading-color);
                            margin: 0 0 4px 0;
                            white-space: nowrap;
                            overflow: hidden;
                            text-overflow: ellipsis;
                        }

                        .result-desc {
                            font-size: 0.8rem;
                            color: var(--ul-text-light);
                            margin: 0 0 4px 0;
                            line-height: 1.3;
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                        }

                        .result-price {
                            font-size: 0.85rem;
                            color: var(--ul-primary);
                            font-weight: 600;
                            background: rgba(var(--ul-primary-rgb), 0.1);
                            padding: 2px 8px;
                            border-radius: 4px;
                            display: inline-block;
                        }

                        .no-results {
                            padding: 20px;
                            text-align: center;
                            color: var(--ul-text-light);
                            font-style: italic;
                            background: transparent;
                        }

                        /* Responsive Design */
                        @media (max-width: 1200px) {
                            .ul-header-search-wrapper {
                                max-width: 450px;
                                min-width: 280px;
                            }
                        }

                        @media (max-width: 992px) {
                            .ul-header-search-wrapper {
                                max-width: 350px;
                                min-width: 250px;
                            }
                            
                            .ul-search-input {
                                font-size: 0.9rem;
                            }
                        }

                        @media (max-width: 768px) {
                            .search-input-group {
                                flex-direction: column;
                                gap: 8px;
                                padding: 8px;
                            }

                            .dropdown-wrapper {
                                width: 100%;
                                min-width: auto;
                            }

                            .search-input-wrapper {
                                width: 100%;
                            }

                            .search-results-dropdown {
                                max-height: 300px;
                            }

                            .result-title {
                                font-size: 0.85rem;
                            }

                            .result-desc {
                                font-size: 0.75rem;
                            }
                        }

                        @media (max-width: 480px) {
                            .ul-header-search-wrapper {
                                min-width: 200px;
                            }
                        }

                        /* Previously global .active rule caused style leakage site-wide.
                           Scope it to only header nav links. */
                        .ul-header .ul-header-nav a.active {
                            color: var(--ul-primary);
                            font-weight: bold;
                        }
                    </style>
                </div>

                <!-- header nav -->
                <div class=" ul-header-nav-wrapper">
                    <div class="to-go-to-sidebar-in-mobile">
                        <nav class="ul-header-nav">
                            <a href="/" class="{{ 'active' if request.path == '/' }}">Home</a>
                        
                            <div class="has-sub-menu has-mega-menu {{ 'active' if request.path.startswith('/shop') }}">
                                <a role="button" href="/shop">Categories</a>

                                <div class="ul-header-submenu ul-header-megamenu">
                                    <div class="single-col">
                                        <span class="single-col-title">Custom Apparels</span>
                                        <ul>
                                            <li><a href="/shop-details?id=000001" class="{{ 'active' if request.path == '/shop-details?id=000001' }}">Elite Supima Polo</a></li>
                                            <li><a href="/shop-details?id=000002" class="{{ 'active' if request.path == '/shop-details?id=000002' }}">Supreme Heavy Weight Cotton Polo</a></li>
                                            <li><a href="/shop-details?id=000003" class="{{ 'active' if request.path == '/shop-details?id=000003' }}">Prime Cotton Polo</a></li>
                                            <li><a href="/shop-details?id=000004" class="{{ 'active' if request.path == '/shop-details?id=000004' }}">Prime Cotton Tipping Polo</a></li>
                                            </ul>
                                            </div>

                                            <div class="single-col">
                                                <span class="single-col-title">Premium Apparels</span>
                                                <ul>
                                                    <li><a href="/shop-details?id=000005" class="{{ 'active' if request.path == '/shop-details?id=000005' }}">Iconic Heavy Cotton Round Neck</a></li>
                                                    <li><a href="/shop-details?id=000006" class="{{ 'active' if request.path == '/shop-details?id=000006' }}">Iconic Soft Cotton Round Neck</a></li>
                                                    <li><a href="/shop-details?id=000007" class="{{ 'active' if request.path == '/shop-details?id=000007' }}">Ultra Soft Zipper Hoodie</a></li>
                                                </ul>
                                            </div>

                                            <div class="single-col">
                                                <span class="single-col-title">Custom Apparel Model</span>
                                                <ul>
                                                    <li><a href="/shop-details?id=000008" class="{{ 'active' if request.path == '/shop-details?id=000008' }}">Ultra Soft Pullover Hoodie</a></li>
                                                    <li><a href="/shop-details?id=000009" class="{{ 'active' if request.path == '/shop-details?id=000009' }}">Premium Dry Fit Pique Performance Polo</a></li>
                                                    <li><a href="/shop-details?id=000010" class="{{ 'active' if request.path == '/shop-details?id=000010' }}">Heavy Weight Round Neck 240</a></li>
                                                </ul>
                                            </div>

                                            <div class="single-col">
                                                <span class="single-col-title">Children's</span>
                                                <ul>
                                                    <li><a href="/shop-details?id=000011" class="{{ 'active' if request.path == '/shop-details?id=000011' }}">Clothing</a></li>
                                                    <li><a href="/shop-details?id=000012" class="{{ 'active' if request.path == '/shop-details?id=000012' }}">Footwear</a></li>
                                                    <li><a href="/shop-details?id=000013" class="{{ 'active' if request.path == '/shop-details?id=000013' }}">Accessories</a></li>
                                                    <li><a href="/shop-details?id=000014" class="{{ 'active' if request.path == '/shop-details?id=000014' }}">Toys & Games</a></li>
                                                    <li><a href="/shop-details?id=000015" class="{{ 'active' if request.path == '/shop-details?id=000015' }}">Baby Essentials</a></li>
                                                </ul>
                                    </div>

                                    <div class="single-col">
                                        <span class="single-col-title">Other Apparels</span>
                                        <ul>
                                            <li><a href="/shop/corporate-uniforms" class="{{ 'active' if request.path == '/shop/corporate-uniforms' }}">Corporate Uniforms</a></li>
                                            <li><a href="/shop/school-uniforms" class="{{ 'active' if request.path == '/shop/school-uniforms' }}">School Uniforms</a></li>
                                            <li><a href="/shop/sports-uniforms" class="{{ 'active' if request.path == '/shop/sports-uniforms' }}">Sports Uniforms</a></li>
                                            <li><a href="/shop/hospital-uniforms" class="{{ 'active' if request.path == '/shop/hospital-uniforms' }}">Hospital Uniforms</a></li>
                                            <li><a href="/shop/hotel-uniforms" class="{{ 'active' if request.path == '/shop/hotel-uniforms' }}">Hotel Uniforms</a></li>
                                            <li><a href="/shop/other-uniforms" class="{{ 'active' if request.path == '/shop/other-uniforms' }}">Other Uniforms</a></li>
                                        </ul>
                                    </div>
                                    <div class="single-col promo-col">
                                        <div class="mega-promo-banner">
                                            <div class="promo-image-wrapper">
                                                <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                                     alt="Premium Fashion Collection" 
                                                     class="promo-img">
                                            </div>
                                            <div class="promo-content-wrapper">
                                                <div class="promo-badge">NEW ARRIVAL</div>
                                                <h3 class="promo-title">Summer Elite<br>Collection 2024</h3>
                                                <div class="promo-offer">
                                                    <span class="discount">50%</span>
                                                    <span class="offer-text">OFF</span>
                                                </div>
                                                <p class="promo-description">Exclusive designs with premium fabrics</p>
                                                <a href="/shop" class="promo-cta-button">
                                                    <span>SHOP NOW</span>
                                                    <i class="flaticon-right-arrow"></i>
                                                </a>
                                            </div>
                                            <style>
                                                .promo-col {
                                                    min-width: 300px !important;
                                                }
                                                
                                                .mega-promo-banner {
                                                    position: relative;
                                                    background: #fff;
                                                    border-radius: 12px;
                                                    overflow: hidden;
                                                    box-shadow: 0 8px 24px rgba(0,0,0,0.12);
                                                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                                                }

                                                .mega-promo-banner:hover {
                                                    transform: translateY(-5px);
                                                    box-shadow: 0 12px 32px rgba(0,0,0,0.18);
                                                }

                                                .promo-image-wrapper {
                                                    position: relative;
                                                    overflow: hidden;
                                                }

                                                .promo-img {
                                                    width: 100%;
                                                    height: 320px;
                                                    object-fit: cover;
                                                    transition: transform 0.5s ease;
                                                }

                                                .mega-promo-banner:hover .promo-img {
                                                    transform: scale(1.05);
                                                }

                                                .promo-content-wrapper {
                                                    position: absolute;
                                                    top: 0;
                                                    left: 0;
                                                    right: 0;
                                                    bottom: 0;
                                                    padding: 25px;
                                                    background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.8) 100%);
                                                    display: flex;
                                                    flex-direction: column;
                                                    justify-content: center;
                                                    align-items: center;
                                                }

                                                .promo-badge {
                                                    background: #ff4444;
                                                    color: white;
                                                    padding: 6px 12px;
                                                    border-radius: 20px;
                                                    font-size: 12px;
                                                    font-weight: 600;
                                                    margin-bottom: 15px;
                                                    letter-spacing: 1px;
                                                }

                                                .promo-title {
                                                    color: #fff;
                                                    font-size: 28px;
                                                    font-weight: 700;
                                                    text-align: center;
                                                    margin-bottom: 15px;
                                                    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                                                    line-height: 1.2;
                                                }

                                                .promo-offer {
                                                    margin-bottom: 15px;
                                                    text-align: center;
                                                }

                                                .discount {
                                                    color: #fff;
                                                    font-size: 42px;
                                                    font-weight: 800;
                                                }

                                                .offer-text {
                                                    color: #fff;
                                                    font-size: 24px;
                                                    font-weight: 600;
                                                    margin-left: 5px;
                                                }

                                                .promo-description {
                                                    color: rgba(255,255,255,0.9);
                                                    font-size: 16px;
                                                    text-align: center;
                                                    margin-bottom: 25px;
                                                }

                                                .promo-cta-button {
                                                    background: #fff;
                                                    color: #000;
                                                    padding: 16px 36px;
                                                    border-radius: 30px;
                                                    font-weight: 600;
                                                    font-size: 15px;
                                                    text-decoration: none;
                                                    display: inline-flex;
                                                    align-items: center;
                                                    gap: 10px;
                                                    transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
                                                    position: relative;
                                                    overflow: hidden;
                                                    margin-bottom: 10%;
                                                }

                                                .promo-cta-button:before {
                                                    content: '';
                                                    position: absolute;
                                                    top: 0;
                                                    left: 0;
                                                    width: 100%;
                                                    height: 100%;
                                                    background: #000;
                                                    transform: translateX(-100%);
                                                    transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
                                                    z-index: 1;
                                                }

                                                .promo-cta-button span,
                                                .promo-cta-button i {
                                                    position: relative;
                                                    z-index: 2;
                                                    transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
                                                }

                                                .promo-cta-button:hover {
                                                    transform: translateY(-2px);
                                                    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
                                                }

                                                .promo-cta-button:hover:before {
                                                    transform: translateX(0);
                                                }

                                                .promo-cta-button:hover span,
                                                .promo-cta-button:hover i {
                                                    color: #fff;
                                                }

                                                .promo-cta-button:hover i {
                                                    transform: translateX(5px);
                                                }
                                            </style>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a href="/shop" class="{{ 'active' if request.path == '/shop' }}">Our Products</a>
                            <a href="/gallery" class="{{ 'active' if request.path == '/gallery' }}">Our Gallery</a>
                            <a href="/testimonials" class="{{ 'active' if request.path == '/testimonials' }}">Testimonials</a>
                            <a href="/contact" class="{{ 'active' if request.path == '/contact' }}">Contact Us</a>
                            <a href="/faq" class="{{ 'active' if request.path == '/faq' }}">FAQ</a>
                            <a href="/about" class="{{ 'active' if request.path == '/about' }}">About Us</a>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>